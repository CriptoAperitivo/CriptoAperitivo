# Come usare Metamask: Connettersi alle Dapp Ethereum e gestione portfolio token

<img src="https://user-images.githubusercontent.com/9484568/122453021-2f4e9080-cfaa-11eb-97ab-f782735bf4f7.gif" height="200">

Internet ha fatto molta strada dai primi giorni del World Wide Web e continua ad evolversi con la tecnologia. Uno degli obiettivi di questa evoluzione è rendere Internet più decentralizzato. La tecnologia blockchain svolge un ruolo significativo nel renderlo possibile, e blockchain del protocollo Ethereum occupa un ruolo di primo piano in questo campo. Con Ethereum è arrivato un trampolino di lancio perfetto per le applicazioni decentralizzate, DeFi, NFT, protocolli di interoperabilità e molto altro.

Ma come si accede a tutte le infrastrutture che Ethereum ha da offrire? La risposta è *MetaMask*.

In questo articolo spieghiamo come utilizzare un wallet MetaMask e connetterci alle applicazioni decentralizzate.

## Cos'è la 'metamaschera'

Metamask è un portafoglio Ethereum con la capacità di supportare tutti i token basati su Ethereum, ma è molto di più!!

È stato sviluppato nel 2016 da Dan Finlay e Aaron Davis, che volevano creare un portafoglio che consentisse agli utenti di interagire con le loro Dapp in modo più sicuro e conveniente dai browser.

MetaMask è stato inizialmente creato come componente aggiuntivo di Google Chrome. Successivamente, sono state implementate le estensioni Firefox e Brave per utilizzare il portafoglio MetaMask con altri browser. Esiste anche l'app wallet MetaMask per dispositivi mobili con funzionalità simili e interfaccia con le estensioni del browser.

<img src = "https://user-images.githubusercontent.com/9484568/125060509-bcb66980-e0ac-11eb-8b33-0d14e286eb58.png"  height="200" >

### 1. Installa MetaMask nel browser

Va da sé che non puoi usare ciò che non hai, quindi il primo passo è installare l'estensione MetaMask sul tuo browser.
È disponibile per Firefox, Google Chrome, Brave Browser e Microsoft Edge. 
Vai alla pagina di download sul sito Web MetaMask e scegli il browser che preferisci.
Ti reindirizzerà al Chrome Webstore, Firefox Add on-page o Microsoft Add-ons page. 
Tutto quello che devi fare ora è aggiungere l'estensione al tuo browser confermando l'installazione.

<img src="https://user-images.githubusercontent.com/83084697/125089243-85f14b00-e0ce-11eb-9719-815de195c920.png" height="200">

### 2. Avvia il Portafoglio

Una volta installato, vedrai il logo della volpe, nell'angolo destro in alto del browser. Fare clic su di esso per visualizzare una pagina di benvenuto se non si è già aperta in automatico. Se non vedi il logo in chrome, probabilmente vuol dire che l'estensione non è fissata in alto a destra. Per farlo è sufficiente cliccare sul pulsante a simbolo di puzzle, e cliccare sul simbolo di puntina per bloccare l'app in alto a destra.

<img src="https://user-images.githubusercontent.com/83084697/125089583-c4870580-e0ce-11eb-879b-05cc6d568bcd.png" height="50">

Alla prima installazione , dovrebbe aprirsi in automatico la pagina con la testa della volpe e un pulsante Inizia, che ti richiederà di creare una frase seme e impostare un nuovo portafoglio oppure di importare un portafoglio esistente se possiedi già una frase seme. Per i principianti che non sanno cosa sia una frase seme ( in inglese *seed* ): è un gruppo di parole usate per accedere al tuo portafoglio crittografico e se è la prima volta che ne generi una , appena creata dovresti scriverla su un foglio cartaceo. Se non lo fai, rischi di perdere l'opportunità di riaccedere al tuo portafoglio nel caso ad esempio il tuo computer si rompesse, perdendo così i tuoi fondi per sempre. 

<img src="https://user-images.githubusercontent.com/83084697/125089832-fbf5b200-e0ce-11eb-8018-3f38fa831929.png" height="200">

Se clicchi su Crea un portafoglio, alla pagina successiva MetaMask ti richiederà se vuoi inviare dati anonimi per migliorare i suoi servizi. 

<img src="https://user-images.githubusercontent.com/83084697/125090007-2ba4ba00-e0cf-11eb-8792-4d50d2bb3771.png" height="200">

<img src="https://user-images.githubusercontent.com/83084697/125090105-4a0ab580-e0cf-11eb-9c79-983d9c27d67b.png" height="200">


Infine metamask, per aiutarti ad accedere al portfoglio senza utilizzare la frase seme, ti chiederà di creare una password complessa. Dopo averlo fatto, puoi controllare le Condizioni d'uso Infine fai click su Crea.

<img src="https://user-images.githubusercontent.com/83084697/125090152-57c03b00-e0cf-11eb-9d29-4900bfa3a2e2.png" height="200">


### 3. Esegui il backup della tua frase seme

La frase seme è molto importante. MetaMask ti permette di eseguire il backup dalle impostazioni , e ti fornisce consigli su come memorizzarla. MetaMask non custodisce le tue informazioni, solo tu ne hai il reale possesso e controllo,  non memorizza le tue informazioni e nessuno ha accesso alle tue risorse digitali. 

In una situazione in cui perdi il tuo dispositivo, non puoi recuperare il tuo portafoglio e ripristinare l'account senza la frase seme. Quindi, è molto importante che tu  scriva la frase seme e la tenga al sicuro. 

MetaMask verifica che tu sia a conoscenza delle tua frase seme, e quando fai il riaccesso con una nuova installazione ti chiederà di confermarla.

Una volta confermata la frase, fai clic su Tutto fatto, quindi puoi iniziare a utilizzare il portafoglio.

### 4. Finanziare il portafoglio

Per finanziare il conto si puo fare  due modi.
- utilizzando token veri, con un  valore reale
- utilizzando token finti

Metamask ti permette di distinguere questi due casi lascaindoti libero di scegliere a quale rete blockchain connetterti. Sì! Ce ne sono diverse!

La rete mainnet è la rete blockchain principale di Ethereum e su questa girano token veri con un valore reale.

Poi ci sono le reti di test , o testnet, che vengono impiegate per testare le applicazioni decentralizzate.

Perciò , per impararare ad usare le dapp con Metamask, puoi decidere di non correre rischi utilizzando le testnet, oppure partire subito con dei token veri inviati sulla rete mainnet.

##### Mainnet : Token veri

Se sei collegato alla rete mainnet ( e NON testnet ) , per inviare token veri al portafoglio, è necessario acquistarli utilizzando ad esempio un exchange centralizzato che permetta l'invio verso wallet privati esterni all'exchange ,  come ad esempio Coinbase, Binance, Gemini, Kraken ecc..

Oppure puoi acquistare ETH veri direttamente dentro Metamask, utilizzando il processore di pagamento Wyre che si collega alla tua carta di debito . Clicca su Compra, e vedrai la possibilità di acquistare token ether sul tuo nuovo portafoglio.

<img src="https://user-images.githubusercontent.com/9484568/125058010-1d907280-e0aa-11eb-989a-73686df37754.png" height="200">

Puoi anche connettere il tuo portafoglio MetaMask a un portafoglio hardware come Ledger e Trezor, e se vuoi qualcosa di mobile, esiste l'app MetaMask su Android o iOS. Nell'app per telefono è incluso un browser in grado di interagire direttamente con le Dapp.

##### Mainnet : token finti

Se invece sei collegato a una testnet, per testare le potenzialità di Metamask è necessario prima ottenere token finti utilizzando i così detti  *faucet*.

*Faucet* significa "rubinetto" che  invia gratuitamente dei token Ether al tuo indirizzo .

La procedura da seguire per cambiare rete da mainnet a testnet è la seguente:

1. Clicca sulla testa della volpe nella barra delle estensioni in alto a destra

<img src="https://user-images.githubusercontent.com/9484568/125054529-968dcb00-e0a6-11eb-9c06-92f37bf43a94.png" height="50">

2. Inserisci la password se te lo chiede 

3. Dove vedi scritto rete principale ethereum , cliccaci sopra

<img src="https://user-images.githubusercontent.com/9484568/125054606-b1f8d600-e0a6-11eb-988c-1a43fd934773.png" height="100">

4. Scegli una rete alternativa tra le disponibili e cioè Ropsten, Rinkeby. Ignora per il momento Goerli e Kovan. 

<img src="https://user-images.githubusercontent.com/9484568/125054692-c6d56980-e0a6-11eb-8b07-1e061e462db5.png" height="300">

5. Clicca sul tuo indirizzo pubblico per copiarlo

<img src="https://user-images.githubusercontent.com/9484568/125054800-e2d90b00-e0a6-11eb-93ae-6d78379329e8.png" height="300">

6. Vai al link della pagina "faucet" e incolla il tuo indirizzo , confermando che desidere ricevere token Ether di test

7. Dopo poco , in Metamask dovresti ritrovarti i token di test alla rete di test a cui sei connesso. Quindi se usi i faucet di rinkeby, vedrai i token nella versione di Metamask connessa a Rinkeby.


Di seguito i link delle pagine faucet:

Rete testnet ROPSTEN
https://faucet.metamask.io/
https://faucet.ropsten.be/
https://faucet.dimensions.network/

Rete testnet RINKEBY
https://faucet.rinkeby.io/

<img src="https://user-images.githubusercontent.com/9484568/125060844-0bfc9a00-e0ad-11eb-94ab-df870741247d.png" height="200">


Non sempre Ropsten funziona, perciò consiglio in linea di massima di usare Rinkeby.

### 5. Interagisci con le Dapp

MetaMask è un ottimo portafoglio perché consente agli utenti di interagire perfettamente con Dapps utilizzando il browser. La rete principale di Ethereum ospita centinaia di Dapp che vanno dalle app DeFi ai mercati NFT ai giochi Blockchain e altro ancora. Puoi avere accesso all'intero web decentralizzato sul tuo browser una volta che hai l'estensione MetaMask. 

Se ti stai chiedendo come interagire con Dapps utilizzando MetaMask, partiamo con un esempio usando la Uniswap. 

Uniswap  è un dapp exchange decentralizzato ( DEX )  in cui puoi scambiare risorse digitali senza un intermediario di terze parti.

<img src="https://user-images.githubusercontent.com/9484568/125062463-b2956a80-e0ae-11eb-8d10-339f51558db9.png" height="200">

Una volta che accedi a Uniswap, vedrai Connetti  un portafoglio nell'angolo in alto a destra. Tutti i siti e le app compatibili con MetaMask hanno solitamente questo tipo di bottone o una sua variante. MetaMask non si connette automaticamente alle  Dapps quindi è necessario fare clic su Connetti e selezionare il portafoglio MetaMask. 

Apparirà una finestra di dialogo di MetaMask che chiede conferma. Seleziona l'account che stai utilizzando e verifica l'autorizzazione che stai dando al sito web prima di confermare in modo da non esporre il tuo account a rischi.

### 6. Scambia Ether con DAI

Ora è il momento di usare Uniswap. Scambieremo il nostro test Ether con DAI, un token con valore stabile , pari al valore del dollaro. Fare questo è semplice. Basta fare clic su Seleziona un token, scegliere DAI e inserire la quantità di Ether che desideri scambiare. Vedrai una stima di quanto DAI riceverai in cambio dell'ETH. Fai clic su Scambia e verrà visualizzata una finestra di dialogo MetaMask che ti chiederà di confermare le transazioni. Controlla tutti i dettagli, comprese le commissioni del gas, quando esegui tali transazioni sulla rete principale di Ethereum.

<img src="https://user-images.githubusercontent.com/9484568/125063258-8b8b6880-e0af-11eb-9fdd-39b8b423f9c7.png" height="200">

<img src="https://user-images.githubusercontent.com/9484568/125063294-98a85780-e0af-11eb-9995-c1f7ef55c9cb.png" height="200">

<img src="https://user-images.githubusercontent.com/9484568/125063456-c8575f80-e0af-11eb-89b8-ffd7fd2acc37.png" height="200">

La tua transazione sarà confermata in tempo proporzionale alla quantità di gas che hai selezionato.
Se non cambi nulla , la transazione avverrà in un intervalo di pochi secondi a qualche minuto a secondo del traffico di transazioni presente sulla rete blockchain in quel dato istante.

Per visualizzare i DAI nel portafoglio puoi cliccare su Aggiungi DAI al tuo portafoglio.

<img src="https://user-images.githubusercontent.com/9484568/125063542-e2913d80-e0af-11eb-8e82-5b2bac7a8c1e.png" height="200">

<img src="https://user-images.githubusercontent.com/9484568/125063701-179d9000-e0b0-11eb-821a-06b8eeacbe5a.png" height="200">

Per visualizzare la transazione puoi cliccare su visualizza la transazione oppure direttamente da dentro Metamask, guardando la storia delle transazioni.

<img src="https://user-images.githubusercontent.com/9484568/125063790-34d25e80-e0b0-11eb-858c-b34ff5f10a03.png" height="200">

<img src="https://user-images.githubusercontent.com/9484568/125063836-4156b700-e0b0-11eb-897d-88c31675ecd4.png" height="200">

<img src="https://user-images.githubusercontent.com/9484568/125063915-5df2ef00-e0b0-11eb-9300-fd42f7bfd7ac.png" height="200">

I token scambiati sulla testnet a volte non corrispondono a quelli che sarebbero scambiati sulla mainnet, perchè la testnet è l'ambiente di prova e non quello realmente utilizzato sulle transazioni con valori reali.


### 7. Controlla le tue risorse su MetaMask

Generalmente, scambiando token Ether con token DAI, non vedrai subito i DAI nella lista dei token nel tuo portafoglio Meta Mask .
E' necessario abilitare Metamask affinchè sia in grado di vedere i token inviati al tuo portafoglio.

Se stai utilizzando la mainnet facilmente riesci a trovare il tuo token all'interno di metamask, però prima devi aggiungere il token che hai scambiato in modo che sia visibile a Metamask.

Per farlo, fai clic su Aggiungi token e cerchi DAI. Quindi metamask carica automaticamente il contratto sulla blockchain che gestisce il token DAI.

Altrimenti, se stai usando la testnet, è necessario aggiungere l'indirizzo del contratto DAI dalla testnet e il simbolo del token DAI.
In questo caso , i passaggi sono più macchinosi, ma di seguito hai la procedura.

1. Fare clic sul logo della Volpe per aprire il portafoglio , e cambia da mainnet a testnet

2. Seleziona i tre punti in alto a destra e fai clic su Visualizza Etherscan

<img src="https://user-images.githubusercontent.com/9484568/125062731-01db9b00-e0af-11eb-8a1b-79bf6e12a046.png" height="200">


3. Fare clic su Token in Panoramica per un menu a discesa e scegliere DAI

<img src="https://user-images.githubusercontent.com/9484568/125063006-4a935400-e0af-11eb-9125-4301a00407be.png" height="200">

4. Troverai l'indirizzo del contratto in Riepilogo profilo. Copialo

<img src="https://user-images.githubusercontent.com/83084697/125090739-fd73aa00-e0cf-11eb-9317-3ce0f15e43d8.png" height="200">



5. Vai su MetaMask, fai clic su Aggiungi token e quindi sulla scheda Token personalizzato


6. Incollare l'indirizzo del contratto nel modulo per Indirizzo contratto token e il resto dei moduli verrà compilato automaticamente.


<img src="https://user-images.githubusercontent.com/83084697/125090835-141a0100-e0d0-11eb-81ea-25c6af72e445.png" height="400">

7. Seleziona Avanti, quindi Aggiungi token e troverai tutte i tuoi token nella panoramica principale.

## Conclusione

MetaMask è uno dei migliori strumenti su cui puoi mettere le mani per goderti appieno ciò che Ethereum ha da offrire in termini di applicazioni decentralizzate e gestione delle tue risorse e connessioni. 

Se desideri migliorare questa guida, la trovi su github qui: https://github.com/CriptoAperitivo/CriptoAperitivo/blob/main/guides/it/1.%20Come%20usare%20Metamask%20%20con%20le%20applicazioni%20decentralizzate.md

Rimani connesso con Criptoaperitivo!!

## Riferimenti

https://academy.binance.com/en/articles/how-to-use-metamask

https://levelup.gitconnected.com/how-to-use-metamask-a-step-by-step-guide-f380a3943fb1
